<div
  class="product-recommendations"
  data-url="{{ routes.product_recommendations_url }}?section_id={{ section.id }}&product_id={{ product.id }}&limit=4&intent=related"
>
  {%- if recommendations.performed? and recommendations.products_count > 0 -%}
    {% if recommendations.intent == 'related' %}
      <h2>You may also like</h2>
    {% elsif recommendations.intent == 'complementary' %}
      <h2>Pair it with</h2>
    {% endif %}

    <ul>
     {% for recommendation in recommendations.products %}
          {% if card_product.tags == card_product.selected_variant.tags %}
            <li class="grid__item ">
              {% render 'card-product',
                card_product: recommendation,
                media_aspect_ratio: section.settings.image_ratio,
                image_shape: section.settings.image_shape,
                show_secondary_image: section.settings.show_secondary_image,
                show_vendor: section.settings.show_vendor,
                show_rating: section.settings.show_rating
              %}
            </li>
          {% endif %}
        {% endfor %}
    </ul>
  {%- endif -%}
</div>

{% schema %}
  {
    "name": "Product recommendations",
    "tag": "section",
  "class": "section container",
    "settings": []
  }
{% endschema %}