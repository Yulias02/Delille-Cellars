{{ 'bundle.css' | asset_url | stylesheet_tag }}
<h1 class="compl-heading">{{ section.settings.heading }}</h1>
<div class="compl-container">
  {%- assign total_price = 0 -%}
  {%- for block in section.blocks -%}
    {% render 'bundle', card_product: block.settings.product %}
    {% assign total_price = total_price | plus: block.settings.product.price %}
  {% endfor %}
  <div class="total-cont">
    <p>Total: {{ total_price | money }}</p>
    <button type="submit" class="button button--secondary">Add to cart</button>
  </div>
</div>

{% schema %}
{
  "name": "Bundle",
  "tag": "section",
   "class": "container product-container pad",
   "settings": [
  {
      "type": "inline_richtext",
      "id": "heading",
      "default": "Perfectly pairs with",
      "label": "t:sections.bundle-section.settings.heading.label"
    }
  ],

  "blocks": [
  {
    "type": "featured_product",
    "name": "t:sections.featured-product.name",
    "settings": [
      {
        "type": "product",
        "id": "product",
        "label": "t:sections.featured-product.blocks.featured-product.settings.product.label"
      }
    ]
  }
],
"presets": [
  {
    "name": "Product section",
    "blocks": [
      {
        "type": "featured_product"
      },
      {
        "type": "featured_product"
      },
      {
        "type": "featured_product"
      }

    ]
  }
]
}
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
